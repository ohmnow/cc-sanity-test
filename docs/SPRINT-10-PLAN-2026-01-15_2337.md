# Sprint 10 + Quick Wins Implementation Plan
**Created:** 2026-01-15 23:37

## Summary
Focus on investor experience improvements, quick UI fixes, and email testing.

---

## Phase 1: Quick Wins (First - ~3 hours)

### 1.1 Hero Padding Fix (30 min)
**Problem:** Content too close to navigation header.

**Files to update:**
- `app/components/marketing/HeroSection.tsx` - Change `pt-32` to `pt-40`
- `app/routes/marketing/about.tsx` - Update hero section padding
- `app/routes/marketing/services.tsx`
- `app/routes/marketing/contact.tsx`
- `app/routes/marketing/properties.tsx`
- `app/routes/marketing/projects.tsx`

### 1.2 Breadcrumbs Component (1 hour)
**Create:** `app/components/Breadcrumbs.tsx`
- ChevronRight separator from lucide-react
- Schema.org BreadcrumbList JSON-LD
- Add to: about, services, properties, projects, investor pages, admin pages

### 1.3 Schema.org SEO (1 hour)
**Update:**
- `app/routes/marketing/properties.$id.tsx` - RealEstateListing schema
- `app/routes/marketing/projects.$slug.tsx` - Product/Investment schema
- `app/routes/marketing/services.tsx` - Service schema

### 1.4 Loading Spinners (30 min)
**Update forms to show Loader2 spinner:**
- `app/routes/investor/opportunities/$slug.loi.tsx`
- `app/routes/marketing/get-started/$type.tsx`
- `app/routes/marketing/contact.tsx`
- `app/routes/admin/lois.tsx` (approve/reject buttons)

### 1.5 Google Analytics (30 min)
**Create:** `app/components/GoogleAnalytics.tsx`
**Update:** `app/root.tsx` - Add to Layout head, read from `GOOGLE_ANALYTICS_ID` env var

---

## Phase 2: Email Testing (30 min)

**Manual test checklist:**
1. Submit lead form at `/get-started/sell` → Admin receives email
2. Submit LOI as investor → Admin + investor receive emails
3. Approve LOI in admin → Investor receives approval email
4. Reject LOI in admin → Investor receives rejection email

---

## Phase 3: LOI Countersigning Workflow (~5 hours)

### 3.1 Install Package
```bash
npm install react-signature-canvas
npm install -D @types/react-signature-canvas
```

### 3.2 Create SignaturePad Component
**Create:** `app/components/SignaturePad.tsx`
- Wrapper around react-signature-canvas
- Clear button, save to base64
- Styled to match site design

### 3.3 Update LOI Schema
**File:** `app/sanity/schemaTypes/letterOfIntentType.ts`

Add to `investorSignature` and `companySignature`:
```typescript
defineField({
  name: 'signatureImage',
  type: 'image',
  title: 'Signature Image',
}),
```

Add to `companySignature`:
```typescript
defineField({name: 'signerName', type: 'string'}),
defineField({name: 'signerEmail', type: 'string'}),
defineField({name: 'ipAddress', type: 'string'}),
```

### 3.4 Update Investor LOI Form
**File:** `app/routes/investor/opportunities/$slug.loi.tsx`
- Replace text signature with SignaturePad
- Upload signature image to Sanity on submit

### 3.5 Create Admin Countersign Page
**Create:** `app/routes/admin/lois.$id.countersign.tsx`
- Display LOI details and investor signature
- SignaturePad for admin signature
- Capture admin name/email from form
- Submit via resource route

### 3.6 Create Countersign Resource Route
**Create:** `app/routes/resource/countersign-loi.ts`
- Upload signature image to Sanity
- Update LOI with companySignature data
- Send "countersigned" email

### 3.7 Update Admin LOIs Page
**File:** `app/routes/admin/lois.tsx`
- Add "Countersign" button for approved LOIs
- Link to countersign page

### 3.8 Update PDF Template
**File:** `app/lib/pdf/loi-template.tsx`
- Render signature images if available
- Show signer names and timestamps

---

## Phase 4: Accreditation Document Upload (~4 hours)

### 4.1 Update Investor Schema
**File:** `app/sanity/schemaTypes/investorType.ts`

Add new field:
```typescript
defineField({
  name: 'accreditationDocuments',
  type: 'array',
  of: [{
    type: 'object',
    fields: [
      {name: 'title', type: 'string'},
      {name: 'file', type: 'file'},
      {name: 'uploadedAt', type: 'datetime'},
      {name: 'status', type: 'string', options: {list: ['pending', 'under_review', 'approved', 'rejected']}},
      {name: 'reviewedAt', type: 'datetime'},
      {name: 'reviewerNotes', type: 'text'},
    ],
  }],
}),
```

### 4.2 Create Upload Resource Route
**Create:** `app/routes/resource/upload-accreditation.ts`
- Handle multipart file upload
- Validate file type (PDF, JPG, PNG) and size (max 10MB)
- Upload to Sanity assets
- Add document to investor record

### 4.3 Update Investor Profile
**File:** `app/routes/investor/profile.tsx`
- Add document upload section
- Display uploaded documents with status badges
- File input with drag-drop styling

### 4.4 Create Admin Accreditation Review Page
**Create:** `app/routes/admin/accreditation.tsx`
- List pending accreditation documents
- Filter by status
- Approve/reject with notes
- Download/view documents

### 4.5 Update Routes
**File:** `app/routes.ts`
```typescript
route('admin/accreditation', './routes/admin/accreditation.tsx'),
route('resource/upload-accreditation', './routes/resource/upload-accreditation.ts'),
```

### 4.6 Update Admin Layout
**File:** `app/routes/admin/layout.tsx`
- Add nav link to accreditation review

---

## Implementation Order

| Order | Task | Time |
|-------|------|------|
| 1 | Hero padding fix | 30 min |
| 2 | Loading spinners | 30 min |
| 3 | Google Analytics | 30 min |
| 4 | Breadcrumbs | 1 hr |
| 5 | Schema.org SEO | 1 hr |
| 6 | Email testing | 30 min |
| 7 | LOI Countersigning | 5 hr |
| 8 | Accreditation Upload | 4 hr |

**Total: ~13 hours**

---

## Critical Files

1. `app/sanity/schemaTypes/investorType.ts` - Accreditation docs schema
2. `app/sanity/schemaTypes/letterOfIntentType.ts` - Signature image fields
3. `app/routes/admin/lois.tsx` - Countersigning workflow
4. `app/routes/investor/profile.tsx` - Document upload UI
5. `app/lib/pdf/loi-template.tsx` - Signature rendering

---

## Verification

1. **Quick wins:** Visual inspection of hero padding, breadcrumbs, loading states
2. **SEO:** Google Rich Results Test tool
3. **Analytics:** Check GA4 real-time dashboard
4. **Emails:** Send test submissions, verify delivery in Resend dashboard
5. **Countersigning:** Full flow - investor signs → admin countersigns → PDF shows both signatures
6. **Accreditation:** Upload doc → appears in admin → approve → investor status updates

---

## E-Signature Research

For LOI countersigning, using **react-signature-canvas** (625 GitHub stars):
- Simple signature pad for drawing signatures
- Lightweight (~150 LoC wrapper)
- Export to PNG/base64 for storage

Alternative considered: **DocuSeal** (open-source DocuSign alternative) - more complex, requires self-hosting.

Sources:
- [react-signature-canvas on npm](https://www.npmjs.com/package/react-signature-canvas)
- [DocuSeal](https://www.docuseal.com/)
